<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chinasofti.ssm.dao.CustomerDao">
     <resultMap type="Customer" id="resultCustomer" autoMapping="true">
          <id property="id" column="id"/>
          <association property="address" javaType="Address" autoMapping="true">
             <id property="id" column="aId"/>
             <result property="deleteStatus" column="aDeleteStatus"/>
          </association>
     </resultMap>
     <select id="findByCustomerId" parameterType="String" resultMap="resultCustomer">
          select *,address.id as aId,address.deleteStatus as aDeleteStatus
	      from  customers left outer join address on customers.customerAddressId=address.addressId
	      where customerId=#{customerId}
     </select>
     <select id="findByCustomerName" parameterType="String" resultMap="resultCustomer">
          select *,address.id as aId,address.deleteStatus as aDeleteStatus
	      from  customers left outer join address on customers.customerAddressId=address.addressId
	      where customerName=#{customerName}
     </select>
     <select id="findById" parameterType="int" resultMap="resultCustomer">
          select *,address.id as aId,address.deleteStatus as aDeleteStatus
	      from  customers left outer join address on customers.customerAddressId=address.addressId
	      where  id=#{id}
     </select>
     <select id="findAll" resultMap="resultCustomer">
          select *,address.id as aId,address.deleteStatus as aDeleteStatus
	      from  customers left outer join address on customers.customerAddressId=address.addressId
     </select>
     <insert id="insert" parameterType="Customer" >
         insert into customers
         (id,customerId,customerName,customerGender,customerAge,customerAddressId,customerTel,customerPhone,customerEmail,
         customerZipCode,customerIdCard,customerBirthday,customerPassword,deleteStatus)
         values (#{id},#{customerId},#{customerName},#{customerGender},#{customerAge},#{address.addressId},
         #{customerTel},#{customerPhone},#{customerEmail},#{customerZipCode},#{customerIdCard},#{customerBirthday},
         #{customerPassword},#{deleteStatus})
     </insert>
     <update id="update" parameterType="Customer">
         update customers set
              customerId=#{customerId},
              customerName=#{customerName},
              customerGender=#{customerGender},
              customerAge=#{ customerAge},
              customerAddressId=#{address.addressId},
              customerTel=#{customerTel},
              customerPhone=#{customerPhone},
              customerEmail=#{customerEmail},
              customerZipCode=#{customerZipCode},
              customerIdCard=#{customerIdCard},
              customerBirthday=#{customerBirthday},
              customerPassword=#{customerPassword},
              deleteStatus=#{deleteStatus}
          where id=#{id}
     </update>
     <delete id="delete" parameterType="String">
         delete from customers
         where customerId=#{customerId}
     </delete>
</mapper>